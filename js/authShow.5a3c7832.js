"use strict";(self["webpackChunkticketing"]=self["webpackChunkticketing"]||[]).push([[159],{1418:function(t,e,s){s.d(e,{Z:function(){return i}});var a=s(8085),i=a.Z.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(t){let e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":e,...this.$attrs},on:this.$listeners})}})},6232:function(t,e,s){s(6699);var a=s(3325),i=s(6210),r=s(6257);e["Z"]=(0,a.Z)(i.Z,(0,r.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),s={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(a=>{a&&(this.errorBag.hasOwnProperty(t._uid)||(s.valid=e(t)))})):s.valid=e(t),s},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const s=this.watchers.find((t=>t._uid===e._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},2157:function(t,e,s){s.d(e,{n:function(){return a}});const a=t=>{for(var e in t)return!1;return!0}},3659:function(t,e){const s={required:t=>!!t||"This field is required.",minimum:t=>e=>!e||(e.trim()||"").length>=t||`Minimum ${t} characters.`,maximum:t=>e=>!e||(e.trim()||"").length<=t||`Maximum ${t} characters.`,numeric:t=>!t||(/^\d+$/.test(t)||"This field must contain only numbers."),alphaSpace:t=>!t||(/^[a-zA-Z ]*$/.test(t)||"This field may only contain alphabetical characters and spaces."),validEmail:t=>!t||(/.+@.+\..+/.test(t)||"E-mail must be valid format"),validMobileNumber:t=>!t||(/^(9)\d{9}$/.test(t)||"Please enter a valid mobile number."),strongPassword:t=>/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[a-z])/.test(t)||"Must contains at least one upper case, one lower case and one number.",fileSize:t=>e=>!e||e.size<1e6*t||`File size must not exceed ${t}MB, you have selected a file with ${(e.size/1e6).toFixed(2)}MB size.`};e["Z"]=s},5081:function(t,e,s){s.d(e,{Z:function(){return _}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{"max-width":"360"},model:{value:t.confirmationDialog,callback:function(e){t.confirmationDialog=e},expression:"confirmationDialog"}},[s("v-card",{staticClass:"text-center"},[s("v-icon",{staticClass:"mt-3",attrs:{large:"",color:"info"}},[t._v("mdi-information-outline")]),s("v-card-title",{staticClass:"text-h6"},[t._v(" "+t._s(t.title)+" ")]),s("v-card-text",[t._v(" "+t._s(t.text)+" ")]),s("v-card-actions",[s("v-row",{attrs:{dense:""}},[s("v-col",[s("v-btn",{staticClass:"text-capitalize",attrs:{color:t.closeBtnColor,block:""},on:{click:function(e){t.confirmationDialog=!1}}},[t._v(" "+t._s(t.closeBtnText)+" ")])],1),s("v-col",[s("v-btn",{staticClass:"text-capitalize",attrs:{color:t.saveBtnColor,block:""},on:{click:t.onSubmit}},[t._v(" "+t._s(t.saveBtnText)+" ")])],1)],1)],1)],1)],1)},i=[],r={props:["confirmationData"],data:()=>({title:null,text:null,closeBtnText:null,closeBtnColor:null,saveBtnText:null,saveBtnColor:null}),mounted(){this.title=this.confirmationData.title,this.text=this.confirmationData.text,this.closeBtnText=this.confirmationData.closeBtnText,this.closeBtnColor=this.confirmationData.closeBtnColor,this.saveBtnText=this.confirmationData.saveBtnText,this.saveBtnColor=this.confirmationData.saveBtnColor},computed:{confirmationDialog:{get:function(){return!0},set:function(){this.$emit("closeConfirmationDialog")}}},methods:{onSubmit(){this.$emit("onSubmit")}}},o=r,n=s(1001),l=s(3453),d=s.n(l),c=s(680),m=s(3237),u=s(7118),h=s(2102),f=s(4497),v=s(6428),w=s(2877),p=(0,n.Z)(o,a,i,!1,null,null,null),_=p.exports;d()(p,{VBtn:c.Z,VCard:m.Z,VCardActions:u.h7,VCardText:u.ZB,VCardTitle:u.EB,VCol:h.Z,VDialog:f.Z,VIcon:v.Z,VRow:w.Z})},8879:function(t,e,s){s.r(e),s.d(e,{default:function(){return P}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{fluid:""}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"8"}},[s("v-card",[s("div",{staticClass:"d-flex"},[s("div",[s("v-card-title",[t._v("Edit Profile")]),s("v-card-subtitle",[s("small",[t._v("Note: All required fields is marked with (*)")])])],1)]),s("v-form",{ref:"form",attrs:{disabled:""}},[s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{ref:"first_name",attrs:{label:"First name*",outlined:"",dense:""},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{ref:"middle_name",attrs:{label:"Middle name",outlined:"",dense:""},model:{value:t.form.middle_name,callback:function(e){t.$set(t.form,"middle_name",e)},expression:"form.middle_name"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{ref:"last_name",attrs:{label:"Last name*",outlined:"",dense:""},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{ref:"email",attrs:{label:"Email*",outlined:"",dense:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{ref:"employee_number",attrs:{label:"Employee number*",outlined:"",dense:""},model:{value:t.form.employee_number,callback:function(e){t.$set(t.form,"employee_number",e)},expression:"form.employee_number"}})],1)],1)],1),s("v-divider"),s("v-card-actions",{staticClass:"pa-4"},[s("v-btn",{staticClass:"text-capitalize",attrs:{color:"primary",disabled:""}},[t._v(" Update ")])],1)],1)],1)],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-card",{attrs:{disabled:""}},[s("v-card-title",[t._v("Change Password")]),s("v-card-subtitle",[s("span",[t._v("Â ")])]),s("v-form",{ref:"changePassForm",attrs:{disabled:t.loading}},[s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{ref:"old_password",attrs:{label:"Old Password*",rules:[t.rules.required,t.validPassword],"append-icon":t.showOldPassword?"mdi-eye":"mdi-eye-off",type:t.showOldPassword?"text":"password",outlined:"",dense:""},on:{"click:append":function(e){t.showOldPassword=!t.showOldPassword}},model:{value:t.changePassForm.old_password,callback:function(e){t.$set(t.changePassForm,"old_password",e)},expression:"changePassForm.old_password"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{ref:"new_password",attrs:{label:"New Password*",rules:[t.rules.required,t.rules.minimum(6),t.rules.maximum(100),t.rules.strongPassword,t.validNewPassword],"append-icon":t.showNewPassword?"mdi-eye":"mdi-eye-off",type:t.showNewPassword?"text":"password",outlined:"",dense:""},on:{"click:append":function(e){t.showNewPassword=!t.showNewPassword}},model:{value:t.changePassForm.new_password,callback:function(e){t.$set(t.changePassForm,"new_password",e)},expression:"changePassForm.new_password"}})],1)],1)],1),s("v-divider"),s("v-card-actions",{staticClass:"pa-4"},[s("v-btn",{staticClass:"text-capitalize",attrs:{color:"primary",block:"",disabled:t.loading},on:{click:function(e){t.confirmationDialog=!0}}},[t._v(" Update ")])],1)],1)],1)],1)],1),t.confirmationDialog?s("confirmation-message",{attrs:{confirmationData:t.confirmationData},on:{closeConfirmationDialog:t.closeConfirmationDialog,onSubmit:t.onSubmit}}):t._e()],1)},i=[],r=s(3659),o=s(629),n=s(5081),l=s(2157),d={components:{ConfirmationMessage:n.Z},data:()=>({rules:r.Z,form:{first_name:null,middle_name:null,last_name:null,email:null,employee_number:null},changePassForm:{old_password:null,new_password:null},confirmationDialog:!1,confirmationData:{title:"Are you sure you want to update?",text:"This action cannot be undone.",closeBtnText:"Cancel",closeBtnColor:"gray",saveBtnText:"Update",saveBtnColor:"primary"},invalidPasswordText:null,invalidNewPasswordText:null,showOldPassword:!1,showNewPassword:!1}),created(){this.getRecord()},computed:{...(0,o.Se)("auth",["user","loading","errors"])},methods:{getRecord(){this.form.first_name=this.user.first_name,this.form.middle_name=this.user.middle_name,this.form.last_name=this.user.last_name,this.form.email=this.user.email,this.form.employee_number=this.user.employee_number},validPassword(t){return t!=this.invalidPasswordText||"Incorrect password."},validNewPassword(t){return t!=this.invalidNewPasswordText||"New password must be different."},async onSubmit(){if(this.confirmationDialog=!1,this.$refs.changePassForm.validate())if(await this.$store.dispatch("auth/changePassword",this.changePassForm),(0,l.n)(this.errors))this.$refs.changePassForm.reset();else{let t="";Object.entries(this.errors).forEach((([e,s])=>{s&&(t||(t=e),"old_password"==e&&(this.invalidPasswordText=this.changePassForm.old_password),"new_password"==e&&(this.invalidNewPasswordText=this.changePassForm.new_password),this.$refs.changePassForm.validate(),this.$refs[t].focus())}))}},closeConfirmationDialog(){this.confirmationDialog=!1}}},c=d,m=s(1001),u=s(3453),h=s.n(u),f=s(680),v=s(3237),w=s(7118),p=s(2102),_=s(4228),b=s(1418),x=s(6232),g=s(2877),B=s(5978),C=(0,m.Z)(c,a,i,!1,null,null,null),P=C.exports;h()(C,{VBtn:f.Z,VCard:v.Z,VCardActions:w.h7,VCardSubtitle:w.Qq,VCardText:w.ZB,VCardTitle:w.EB,VCol:p.Z,VContainer:_.Z,VDivider:b.Z,VForm:x.Z,VRow:g.Z,VTextField:B.Z})}}]);
//# sourceMappingURL=authShow.5a3c7832.js.map